<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  


  <title> npf.io </title>

  
  <link rel="stylesheet" href="http://npf.io/css/poole.css">
  <link rel="stylesheet" href="http://npf.io/css/syntax.css">
  <link rel="stylesheet" href="http://npf.io/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="http://npf.io/index.xml" rel="alternate" type="application/rss+xml" title="npf.io" />

  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

  <link href='http://fonts.googleapis.com/css?family=Raleway:400,300' rel='stylesheet' type='text/css'>

  <script src="//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
  <script>
    WebFont.load({
      google: {
        families: ['Raleway']
      }
    });
  </script>

</head>

<body>

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1 class="brand"><a href="/">npf.io</a></h1>
      <p class="lead">
       code by Nate Finch 
      </p>
    </div>



    <ul class="sidebar-nav">
      <li><a href="/blog">Posts</a></li>
      
        <li><a href="http://npf.io/about">About </a></li>
      
      <br/>
      
      <li>Code:</li>
        
          <li><a href="http://npf.io/lumberjack.v2/">Lumberjack </a></li>
        
          <li><a href="http://npf.io/npipe.v2/">npipe </a></li>
        
      
    </ul>
      <a href="https://twitter.com/natethefinch"><i class="fa fa-twitter-square"></i></a>&nbsp;&nbsp;
      
      
      <a href="https://github.com/natefinch"><i class="fa fa-github-square"></i></a>&nbsp;&nbsp;
      <a href="https://plus.google.com/&#43;NateFinch"><i class="fa fa-google-plus"></i></a>

    <p class="footnote">powered by <a href="http://hugo.spf13.com">Hugo</a> <br/>
    &copy; 2014 Nate Finch. All rights reserved.</p>
    
  </div>
</div>


    <div class="content container">
<div class="posts">

      
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://npf.io/2014/08/making-it-a-series/">
        Making It a Series
      </a>
    </h1>

    <span class="post-date">Fri, Aug 8, 2014</span>

    
      
      <p class="seriesname">Series: <a href="http://npf.io/series/hugo-101">Hugo 101</a></p>
    


    <p>I obviously have a lot to talk about with Hugo, so I decided I wanted to make
this into a series of posts, and have links at the bottom of each post
automatically populated with the other posts in the series.  This turned out to
be somewhat of a challenge, but doable with some effort&hellip; hopefully someone
else can learn from my work.</p>

<p>This now brings us to <a href="http://hugo.spf13.com/taxonomies/overview">Taxonomies</a>.
Taxonomies are basically just like tags, except that you can have any number of different types of tags.  So you might have &ldquo;Tags&rdquo; as a taxonomy, and thus you can give a content tags with values of &ldquo;go&rdquo; and &ldquo;programming&rdquo;.  Buy you can have a taxonomy of &ldquo;series&rdquo; and give content a series of &ldquo;Hugo 101&rdquo;.</p>

<p>Taxonomy is sort of like relatable metadata to gather multiple pieces of content
together in a structured way&hellip; it&rsquo;s almost like a minimal relational database.
Taxonomies are listed in your site&rsquo;s metadata, and consist of a list of keys.
Each piece of content can specify one or more values for those keys (the Hugo
documentation calls the values &ldquo;Terms&rdquo;).  The values are completely ad-hoc, and
don&rsquo;t need to be pre-defined anywhere.  Hugo automatically creates pages where
you can view all content based on Taxonomies and see how the various values are
cross-referenced against other content.  This is a way to implement tags on
posts, or series of posts.</p>

<p>So, for my example, we add a Taxonomy to my site config called &ldquo;series&rdquo;.  Then
in this post, the &ldquo;Hugo: Beyond the Defaults&rdquo; post, and the &ldquo;Hugo is Friggin&rsquo; Awesome&rdquo; post, I just add <code>series =
[&quot;Hugo 101&quot;]</code>  (note the brackets - the values for the taxonomy are actually a
list, even if you only have one value).  Now all these posts are magically related together under a taxonomy called &ldquo;series&rdquo;.  And Hugo automatically generates a listing for this taxonomy value at <a href="http://npf.io/series/hugo-101">/series/hugo-101</a> (the taxonomy value gets url-ized).  Any other series I make will be under a similar directory.</p>

<p>This is fine and dandy and pretty aweomse out of the box&hellip; but I really want to
automatically generate a list of posts in the series at the bottom of each post
in the series.  This is where things get tricky, but that&rsquo;s also where things
get interesting.</p>

<p>The examples for <a href="http://hugo.spf13.com/taxonomies/displaying">displaying
Taxonomies</a> all &ldquo;hard code&rdquo; the
taxonomy value in the template&hellip; this works great if you know ahead of time
what value you want to display, like &ldquo;all posts with tag = &lsquo;featured&rsquo;&rdquo;.
However, it doesn&rsquo;t work if you don&rsquo;t know ahead of time what the taxonomy value
will be (like the series on the current post).</p>

<p>This is doable, but it&rsquo;s a little more complicated.</p>

<p>I&rsquo;ll give you a dump of the relevant portion of my post template and then talk about how I got there:</p>

<pre><code>{{ if .Params.series }}
    {{ $name := index .Params.series 0 }}
    &lt;hr/&gt;
	&lt;p&gt;&lt;a href=&quot;&quot; id=&quot;series&quot;&gt;&lt;/a&gt;This is a post in the 
	&lt;b&gt;{{$name}}&lt;/b&gt; series.&lt;br/&gt;
	Other posts in this series:&lt;/p&gt;

    {{ $name := $name | urlize }}
    {{ $series := index .Site.Taxonomies.series $name }}
    &lt;ul class=&quot;series&quot;&gt;
    {{ range $series.Pages }}
    	&lt;li&gt;{{.Date.Format &quot;Jan 02, 2006&quot;}} -
    	&lt;a href=&quot;{{.Permalink}}&quot;&gt;{{.LinkTitle}}&lt;/a&gt;&lt;/li&gt;
    {{end}}
    &lt;/ul&gt;
{{end}} 
</code></pre>

<p>So we start off defining this part of the template to only be used if the post
has a series.  Right, sure, move on.</p>

<p>Now, the tricky part&hellip; the taxonomy values for the current page resides in the
.Params values, just like any other custom metadata you assign to the page.</p>

<p>Taxonomy values are always a list (so you can give things multiple tags etc),
but I know that I&rsquo;ll never give something more than one series, so I can just
grab the first item from the list.  To do that, I use the index function, which
is just like calling series[0] and assign it to the $name variable.</p>

<p>Now another tricky part&hellip; the series in the metadata is in the pretty form you
put into the metadata, but the list of Taxonomies in .Site.Taxonomies is in the
urlized form&hellip;  How did I figure that out?  Printf
debugging.  Hugo&rsquo;s auto-reloading makes it really easy to use the template
itself to figure out what&rsquo;s going on with the template and the data.</p>

<p>When I started writing this template, I just put <code>{{$name}}</code> in my post template
after the line where I got the name, and I could see it rendered on webpage of
my post that the name was &ldquo;Hugo 101&rdquo;.  Then I put <code>{{.Site.Taxonomies.series}}</code>
and I saw something like <code>map[hugo-101:[{0 0xc20823e000} {0 0xc208048580} {0
0xc208372000}]]</code>  which is ugly, but it showed me that the value in the map is
&ldquo;hugo-101&rdquo;&hellip; and I realized it was using the urlized version, so I used the
pre-defined hugo function <code>urlize</code> to convert the pretty series.</p>

<p>And from there it&rsquo;s just a matter of using <code>index</code> again, this time to use
<code>$name</code> as a key in the map of series&hellip;.  .Site.Taxonomies is a map
(dictionary) of Taxonomy names (like &ldquo;series&rdquo;) to maps of Taxonomy values (like
&ldquo;hugo-101&rdquo;) to lists of pages.  So, .Site.Taxonomies.series reutrns a map of
series names to lists of pages&hellip; index that by the current series names, and
bam, list of pages.</p>

<p>And then it&rsquo;s just a matter of iterating over the pages and displaying them
nicely. And what&rsquo;s great is that this is now all automatic&hellip; all old posts get
updated with links to the new posts in the series, and any new series I make,
regardless of the name, will get the nice list of posts at the bottom for that series.</p>

  </div>
  
  
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://npf.io/2014/08/hugo-beyond-the-defaults/">
        Hugo: Beyond the Defaults
      </a>
    </h1>

    <span class="post-date">Fri, Aug 8, 2014</span>

    
      
      <p class="seriesname">Series: <a href="http://npf.io/series/hugo-101">Hugo 101</a></p>
    


    <p>In my last post, I had deployed what is almost the most basic Hugo site
possible.  The only reason it took more than 10 minutes is because I wanted to
tweak the theme.  However, there were a few things that immediately annoyed me.</p>

<p>I didn&rsquo;t like having to type <code>hugo -t hyde</code> all the time.  Well, turns out
that&rsquo;s not necessary.  You can just put  <code>theme = &quot;hyde&quot;</code> in your site
config, and never need to type it again.  Sweet.  Now to run the local server, I
can just run <code>hugo server -w</code>, and for final generation, I can just run <code>hugo</code>.</p>

<p>Next is that my posts were under npf.io/post/postname &hellip; which is not the end
of the world, but I really like seeing the date in post URLs, so that it&rsquo;s easy
to tell if I&rsquo;m looking at something really, really old.  So, I went about
looking at how to do that.  Turns out, it&rsquo;s trivial.  Hugo has a feature called
<a href="http://hugo.spf13.com/extras/permalinks">permalinks</a>, where you can define the
format of the url for a section (a section is a top level division of your site,
denoted by a top level folder under content/).  So, all you have to do is, in
your site&rsquo;s config file, put some config that looks like this:</p>

<pre><code>[permalinks]
    post = &quot;/:year/:month/:filename/&quot;
    code = &quot;/:filename/&quot;
</code></pre>

<p>While we&rsquo;re at it, I had been putting my code in the top level content
directory, because I wanted it available at npf.io/projectname  &hellip;. however
there&rsquo;s no need to do that, I can put the code under the code directory and just
give it a permalink to show at the top level of the site.  Bam, awesome, done.</p>

<p>One note: Don&rsquo;t forget the slash at the end of the permalink.</p>

<p>But wait, this will move my &ldquo;Hugo is Friggin&rsquo; Awesome&rdquo; post to a different URL,
and Steve Francia already tweeted about it with the old URL.  I don&rsquo;t want that
url to send people to a 404 page!
<a href="http://hugo.spf13.com/extras/aliases">Aliases</a> to the rescue.  Aliases are just
a way to make redirects from old URLs to new ones.  So I just put <code>aliases =
[&quot;/post/hugo-is-awesome/&quot;]</code> in the metadata at the top of that post, and now
links to there will redirect to the new location.  Awesome.</p>

<p>Ok, so cool&hellip; except that I don&rsquo;t really want the content for my blog posts
under content/post/ &hellip; I&rsquo;d prefer them under content/blog, but still be of type
&ldquo;post&rdquo;.  So let&rsquo;s change that too.  This is pretty easy, just rename the folder
from post to blog, and then set up an
<a href="http://hugo.spf13.com/content/archetypes">archetype</a> to default the metadata
under /blog/ to type = &ldquo;post&rdquo;.  Archetypes are default metadata for a section,
so in this case, I make a file archetypes/blog.md and add type= &ldquo;post&rdquo; to the
archetype&rsquo;s metadata, and now all my content created with <code>hugo new
blog/foo.md</code> will be prepopulated as type &ldquo;post&rdquo;.  (does it matter if the type
is post vs. blog?  no.  But it matters to me ;)</p>

<p><a href="https://twitter.com/mlafeldt">@mlafeldt</a> on Twitter pointed out my RSS feed was
wonky&hellip;. wait, I have an RSS feed?  Yes, Hugo <a href="http://hugo.spf13.com/templates/rss">has that
too</a>.  There are feed XML files
automatically output for most listing directories&hellip; and the base feed for the
site is a list of recent content.  So, I looked at what Hugo had made for me
(index.xml in the root output directory)&hellip; this is not too bad, but I don&rsquo;t
really like the title, and it&rsquo;s including my code content in the feed as well as
posts, which I don&rsquo;t really want.  Luckily, this is trivial to fix.  The RSS xml
file is output using a Go template just like everything else in the output.
It&rsquo;s trivial to adjust the template so that it only lists content of type
&ldquo;post&rdquo;, and tweak the feed name, etc.</p>

<p>I was going to write about how I got the series stuff at the bottom of this
page, but this post is long enough already, so I&rsquo;ll just make that into its own
post, as the next post in the series! :)</p>

  </div>
  
  
  
  
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://npf.io/2014/08/hugo-is-awesome/">
        Hugo Is Friggin&#39; Awesome
      </a>
    </h1>

    <span class="post-date">Fri, Aug 1, 2014</span>

    
      
      <p class="seriesname">Series: <a href="http://npf.io/series/hugo-101">Hugo 101</a></p>
    


    <p>This blog is powered by <a href="http://hugo.spf13.com">Hugo</a>, a static site generator
written by Steve Francia (aka spf13).  It is, of course, written in Go.  It is
pretty similar to <a href="jekyllrb.com">Jekyll</a>, in that you write markdown, run a
little program (hugo) and html pages come out the other end in the form of a
full static site.  What&rsquo;s different is that Jekyll is written in ruby and is
relatively slow, and Hugo is written in Go and is super fast&hellip; only taking a
few milliseconds to render each page.</p>

<p>Hugo includes a webserver to serve the content, which will regenerate the site
automatically when you change your content.  Your browser will update with the
changes immediately, making your development cycle for a site a very tight
loop.</p>

<p>The basic premise of Hugo is that your content is organized in a specific way on
purpose.  Folders of content and the name of the files combine to turn into the
url at which they are hosted. For example, content/foo/bar/baz.md will be hosted
at &lt;site&gt;/foo/bar/baz.</p>

<p>Every content file has a section of metadata at the top that allows you to
specify information about the content, like the title, date, even arbitrary data
for your specific site (for example, I have lists of badges that are shown on
pages for code projects).</p>

<p>All the data in a content file is just that - data.  Other than markdown
specifying a rough view of your page, the actual way the content is viewed is
completely separated from the data.  Views are written in Go&rsquo;s templating
language, which is quick to pick up and easy to use if you&rsquo;ve used other
templating languages (or even if, like me, you haven&rsquo;t).  This lets you do
things like iterate over all the entries in a menu and print them out in a ul/li
block, or iterate over all the posts in your blog and display them on the main
page.</p>

<p>You can learn more about Hugo by going to <a href="http://hugo.spf13.com">its site</a>,
which, of course, is built using Hugo.</p>

<p>The static content for this site is hosted on github pages at
<a href="https://github.com/natefinch/natefinch.github.io">https://github.com/natefinch/natefinch.github.io</a>. But the static content is
relatively boring&hellip; that&rsquo;s what you&rsquo;re looking at in your browser right now.
What&rsquo;s interesting is the code behind it.  That lives in a separate repo on
github at <a href="https://github.com/natefinch/npf">https://github.com/natefinch/npf</a>.  This is where the markdown content
and templates live.</p>

<p>Here&rsquo;s how I have things set up locally&hellip; all open source code on my machine
lives in my GOPATH (which is set to my HOME).  So, it&rsquo;s easy to find anything I
have ever downloaded. Thus, the static site lives at
$GOPATH/src/github.com/natefinch/natefinch.github.io and the markdown +
templates lives in $GOPATH/src/github.com/natefinch/npf.  I created a symbolic
link under npf called public that points to the natefinch.github.io directory.
This is the directory that hugo outputs the static site to by default&hellip; that
way Hugo dumps the static content right into the correct directory for me to
commit and push to github.  I just had to add public to my .gitignore so
everyone wouldn&rsquo;t get confused.</p>

<p>Then, all I do is go to the npf directory, and run</p>

<pre><code>hugo new post/urlofpost.md
hugo server --buildDrafts --watch -t hyde
</code></pre>

<p>That generates a new content item that&rsquo;ll show up on my site under
/post/urlofpost.  Then it runs the local webserver so I can watch the content by
pointing a browser at localhost:1313 on a second monitor as I edit the post in a
text editor. hyde is the name of the theme I&rsquo;m using, though I have modified
it.  Note that hugo will mark the content as a draft by default, so you need
&ndash;buildDrafts for it to get rendered locally, and remember to delete the draft =
true line in the page&rsquo;s metadata when you&rsquo;re ready to publish, or it won&rsquo;t show
up on your site.</p>

<p>When I&rsquo;m satisfied, kill the server, and run</p>

<pre><code>hugo -t hyde
</code></pre>

<p>to generate the final site output, switch into the public directory, and</p>

<pre><code>git commit -am &quot;some new post&quot;
</code></pre>

<p>That&rsquo;s it.  Super easy, super fast, and no muss.  Coming from Blogger, this is
an amazingly better workflow with no wrestling with the WYSIWYG editor to make
it display stuff in a reasonable fashion.  Plus I can write posts 100% offline
and publish them when I get back to civilization.</p>

<p>There&rsquo;s a lot more to Hugo, and a lot more I want to do with the site, but that
will come in time and with more posts :)</p>

  </div>
  
  
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://npf.io/2014/08/first/">
        First Post
      </a>
    </h1>

    <span class="post-date">Fri, Aug 1, 2014</span>

    


    <p>This is the first post of my new blog.  You may (eventually) see old posts
showing up behind here, those have been pulled in from my personal blog at
<a href="http://blog.natefinch.com">blog.natefinch.com</a>. I&rsquo;ve decided to split off my
programming posts so that people who only want to see the coding stuff don&rsquo;t
have to see my personal posts, and people that only want to see my personal
stuff don&rsquo;t have to get inundated with programming posts.</p>

<p>Right now the site is pretty basic, but I will add more features to it, such as post history etc.</p>

  </div>
  
  
  
  
  
  
</div>


  </body>
</html>
