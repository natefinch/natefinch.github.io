<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
    
      <meta name="go-import" content="npf.io/gorram git https://github.com/natefinch/gorram">
    
  

  <title> Gorram  &middot; npf.io </title>

  
  <link rel="stylesheet" href="https://npf.io/css/poole.css">
  <link rel="stylesheet" href="https://npf.io/css/syntax.css">
  <link rel="stylesheet" href="https://npf.io/css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="" rel="alternate" type="application/rss+xml" title="npf.io" />

  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

  <link href='https://fonts.googleapis.com/css?family=Raleway:400,300' rel='stylesheet' type='text/css'>

  <script src="//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
  <script>
    WebFont.load({
      google: {
        families: ['Raleway']
      }
    });
  </script>

</head>

<body>

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1 class="brand"><a href="https://npf.io">npf.io</a></h1>
      <p class="lead">
       code by Nate Finch 
      </p>
    </div>



    <ul class="sidebar-nav">
      <li><a href="https://npf.io/blog">Posts</a></li>
      
        <li><a href="/about/">About </a></li>
      
      <br/>
      
      <li>Code:</li>
        
          <li><a href="/gorram/">Gorram </a></li>
        
          <li><a href="/lumberjack.v2/">Lumberjack </a></li>
        
          <li><a href="/pie/">Pie </a></li>
        
          <li><a href="/npipe.v2/">npipe </a></li>
        
      
    </ul>
      <a href="https://twitter.com/natethefinch"><i class="fa fa-twitter-square"></i></a>&nbsp;&nbsp;
      
      
      <a href="https://github.com/natefinch"><i class="fa fa-github-square"></i></a>&nbsp;&nbsp;
      <a href="https://plus.google.com/&#43;NateFinch"><i class="fa fa-google-plus"></i></a>

    <p class="footnote">powered by <a href="http://hugo.spf13.com">Hugo</a> <br/>
    &copy; 2016 Nate Finch. All rights reserved.</p>
    
  </div>
</div>


    <div class="content container">
  <div class="post">
    <h1 class="post-title"><a href="https://github.com/natefinch/gorram">Gorram</a>
    
    <span class="badges">
    
    	<a href="https://godoc.org/npf.io/gorram"><img class="badge" title="godoc" alt="godoc" src="https://godoc.org/npf.io/gorram?status.svg"></a>
    
    	<a href="https://drone.io/github.com/natefinch/gorram/latest"><img class="badge" title="build status" alt="build status" src="https://drone.io/github.com/natefinch/gorram/status.png"></a>
    
    </span>
    
    </h1>
    

<p><img src="https://cloud.githubusercontent.com/assets/3185864/18798443/97829e60-81a0-11e6-99a2-d8a788dd9279.jpg" alt="river" /></p>

<p><sup><sub>image: &copy; <a href="http://subsuid.deviantart.com/art/River-Tam-Speed-Drawing-282223915">SubSuid</a></sub></sup></p>

<p>It&rsquo;s like go run for any go function.</p>

<p>Automagically understands how to produce an interface from the command line into a Go function.</p>

<h2 id="examples:64b8d3d82c701efd6c6d8d7470456e55">Examples</h2>

<p>Pretty print JSON:</p>

<pre><code>$ echo '{ &quot;foo&quot; : &quot;bar&quot; }' | gorram encoding/json Indent &quot;&quot; $'\t'
{
    &quot;foo&quot; : &quot;bar&quot;
}
</code></pre>

<p>Calculate a sha256 sum:</p>

<pre><code>$ gorram crypto/sha256 Sum256 foo.gz
abcdef012345678
</code></pre>

<h2 id="how-it-works:64b8d3d82c701efd6c6d8d7470456e55">How it works</h2>

<p>The first time you run Gorram with a specific function name, Gorram analyzes the
package function and generates a file for use with <code>go run</code>.  Gorram
intelligently converts stdin and/or cli arguments into arguments for the
function. Output is converted similarly to stdout.  The code is cached in a
local directory so that later runs don&rsquo;t incur the generation overhead.</p>

<h2 id="heuristics:64b8d3d82c701efd6c6d8d7470456e55">Heuristics</h2>

<p>By default, Gorram just turns CLI args into function args and prints out the
return value of a function using fmt&rsquo;s %v.  However, there are some special
heuristics that it uses to be smarter about inputs and outputs, based on common
go idioms.</p>

<p>For example:</p>

<pre><code>usage:
$ cat foo.zip | gorram crypto/sha1 Sum
or
$ gorram crypto/sha1 Sum foo.zip

function:
// crypto/sha1
func Sum(data []byte) [Size]byte
</code></pre>

<p>Gorram understands functions that take a single slice of bytes (or an io.Reader)
should read from stdin, or if an argument is specified, the argument is treated
as a filename to be read.</p>

<p>Return values that are an array of bytes are understood to be intended to be
printed with fmt&rsquo;s %x, so that you get <code>2c37424d58</code> instead of <code>[44 55 66 77
88]</code>.</p>

<pre><code>usage:
$ gorram encoding/json Indent foo.json &quot;&quot; $'\t'
or
$ cat foo.json | gorram encoding/json Indent &quot;&quot; $'\t'

function:
// encoding/json
func Indent(dst *bytes.Buffer, src []byte, prefix, indent string) error
</code></pre>

<p>Gorram understands that functions with a src argument that is an io.Reader or
[]bytes and a dst argument that is a []byte, *bytes.Buffer, or io.Writer will
read from stdin (or use an argument as a file to open), and write what is
written to dst to stdout.</p>

<p>Gorram understands that if the function returns a non-nil error, the error
should be written to stderr, the program exits with a non-zero exit status, and
nothing is written to stdout.</p>

<p>Gorram understands that prefix and indent are arguments that need to be
specified in the command line.</p>

<pre><code>usage:
$ gorram math Cos 25

function:
// math
func Cos(x float64) float64
</code></pre>

<p>Gorram understands how to convert CLI arguments using the stringconv.Parse*
functions, and will print outputs with <code>fmt.Printf(&quot;%v\n&quot;, val)</code>.</p>

<pre><code>usage:
$ echo 12345 | gorram encoding/base64 StdEncoding.EncodeToString
MTIzNDU2Cg==

function:
// base64
func (e *Encoding) EncodeToString(b []byte]) string
</code></pre>

<p>Gorram understands that packages have global variables that have methods you can
call.</p>

  </div>
  </div>

  </body>
</html>
